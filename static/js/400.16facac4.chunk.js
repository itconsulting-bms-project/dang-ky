"use strict";(self.webpackChunksamana_fe=self.webpackChunksamana_fe||[]).push([[400],{8491:(e,l,n)=>{n.d(l,{A:()=>T});var r=n(8372),t=n(2435),i=n(8374),a=n(28),s=n(1428),o=n(8146),d=n(9153),c=n(1397),u=n.n(c),h=n(6663),x=n(2711),p=n(3199),v=n(8596),g=n(6069),j=n(7010),m=n(4384),y=n(9950),f=n(6772);n(3170),n(3239);function b(){return"undefined"!==typeof window&&window.innerWidth<=600}var A=n(4160),k=n(4414);function C(e){return(0,k.jsx)(A.A,{...e})}const w=e=>{let{data:l,page:n,pageSize:r,orderKey:t,order:i}=e;const a=t?u().orderBy(l,[t],[i]):l;return null!==a&&void 0!==a&&a.length?a.length<=r?a:null===a||void 0===a?void 0:a.slice((n-1)*r,n*r):[]},S=e=>{let{currentPage:l,pageSize:n,total:s,onChange:o}=e;const d=b()?4:7,c=Math.ceil(d/2),u=Math.floor(d/2),h=b()?0:2,v=(0,y.useMemo)((()=>{const e=[];if(s<=n)return[];if(s<=n*d){for(let l=1;l<=Math.ceil(s/n);l++)e.push({value:l});return e}if(l<=c){for(let l=1;l<=c;l++)e.push({value:l});e.push({value:"..."});for(let l=Math.ceil(s/n)-1;l<=Math.ceil(s/n);l++)e.push({value:l});return e}if(l>=Math.ceil(s/n)-u){e.push({value:1}),e.push({value:"...",isBack:!0});for(let l=Math.ceil(s/n)-u;l<=Math.ceil(s/n);l++)e.push({value:l});return e}e.push({value:1}),e.push({value:"...",isBack:!0});for(let n=l;n<=l+h;n++)e.push({value:n});return e.push({value:"..."}),e.push({value:Math.ceil(s/n)}),e}),[l,n,s]);return(0,k.jsxs)(r.A,{className:"Pagination-laptopUp",sx:{pt:2,gap:{xs:.5,sm:1},["& .".concat(i.A.root)]:{borderRadius:"50%"},display:s<=n?"none":"flex"},children:[(0,k.jsxs)(t.A,{size:"sm",variant:"outlined",color:"neutral",disabled:1===l,onClick:()=>{o(l-1)},children:[(0,k.jsx)(x.A,{}),(0,k.jsx)(r.A,{sx:{display:{xs:"none",sm:"initial"}},children:"Previous"})]}),(0,k.jsx)(r.A,{sx:{flex:1}}),v.map(((e,n)=>{let{value:r,isBack:t}=e;return(0,k.jsx)(a.Ay,{size:"sm",variant:Number(r)?"outlined":"plain",color:Number(r)===l?"primary":"neutral",onClick:()=>{"number"===typeof r?o(r):"..."===r&&o(t?l-1:l+1)},children:r},r+"_"+n)})),(0,k.jsx)(r.A,{sx:{flex:1}}),(0,k.jsxs)(t.A,{size:"sm",variant:"outlined",color:"neutral",disabled:!s||l===Math.ceil(s/n),onClick:()=>{o(l+1)},children:[(0,k.jsx)(r.A,{sx:{display:{xs:"none",sm:"initial"}},children:"Next"}),(0,k.jsx)(p.A,{})]})]})},z=e=>{let{data:l,filterValue:n,filterFields:r}=e;return null!==l&&void 0!==l&&l.length?n?u().filter(l,(e=>u().every(r,(l=>{const{type:r,key:t}=l,i=n[t];if(u().isEmpty(i))return!0;if("text"===r)return(0,f.Xs)(e[t],i);if("texts"===r){return(l.keys||[]).some((l=>(0,f.Xs)(e[l],i)))}var a;if("multiple-select"===r)return null===i||void 0===i||null===(a=i.includes)||void 0===a?void 0:a.call(i,e[t]);if("date"===r){if(!e[t])return!1;const l=new Date(e[t]).getTime(),n=null===i||void 0===i?void 0:i.from,r=null===i||void 0===i?void 0:i.to;if(n&&r)return l>=n&&l<=r;if(n)return l>=n;if(r)return l<=r}return!0})))):l:[]};function T(e){var l,n;let{data:t,noLoading:i=!1,columns:a,sortKeys:c,pageSize:x=50,onRowClick:p,size:f,tableActions:b,mobileTitle:A,renderSubList:T,emptyText:M="No data",showOrder:_=!0,selectable:B,selectedList:F,setSelectedList:L,fixedColumns:O=0,tableHeight:D="calc(100vh - 250px)",filterValue:E,filterFields:P}=e;const H=(0,y.useMemo)((()=>null===t||void 0===t?void 0:t.map((e=>{const l={...e};return a.forEach((n=>{n.rawValue&&(l[n.key]=n.rawValue(e))})),l}))),[t,a]),[R,N]=(0,y.useState)(1),[V,W]=(0,y.useState)({key:null!==(l=null===c||void 0===c?void 0:c[0])&&void 0!==l?l:"",order:"desc"}),X=(0,y.useMemo)((()=>z({data:H,filterValue:E,filterFields:P})),[H,E,P]),K=(0,y.useMemo)((()=>w({data:X,page:R,pageSize:x,orderKey:V.key,order:V.order})),[X,R,x,V.key,V.order]),U=(0,y.useMemo)((()=>!(null===F||void 0===F||!F.length)&&(F.length===K.length&&u().every(F,(e=>K.some((l=>l._id===e)))))),[F,K]);(0,y.useEffect)((()=>{N(1)}),[E]);const I=!i&&!(null!==t&&void 0!==t&&t.finishLoading)&&!(null!==t&&void 0!==t&&t.length),Y=(0,k.jsx)("tr",{children:(0,k.jsx)("td",{colSpan:a.filter((e=>!e.hide)).length,style:{textAlign:"center",padding:"16px 0"},children:(0,k.jsx)(v.A,{color:"neutral"})})}),G=(0,k.jsx)("tr",{children:(0,k.jsx)("td",{colSpan:a.filter((e=>!e.hide)).length+(B?1:0)+(_?1:0),style:{textAlign:"center",padding:"16px 0"},children:(0,k.jsx)(d.Ay,{children:M})})}),q={};for(let r=0;r<O;r++)q["& tr > *:nth-child(".concat(r+1,")")]={position:"sticky",left:"".concat(40*r,"px"),bgcolor:"var(--TableCell-headBackground)"},q["& thead tr > *:nth-child(".concat(r+1,")")]={zIndex:11};return(0,k.jsxs)(g.A,{spacing:0,children:[(0,k.jsx)(j.A,{container:!0,spacing:2,sx:{my:0},children:!!b&&(0,k.jsx)(j.A,{sm:12,xs:12,children:b})}),(0,k.jsx)(s.A,{variant:"outlined",sx:{display:{xs:"none",sm:"initial"},width:"100%",borderRadius:"sm",flexShrink:1,overflow:"auto",minHeight:0,maxHeight:D},children:(0,k.jsxs)(o.A,{stickyHeader:!0,hoverRow:!0,sx:{"--TableCell-headBackground":"var(--joy-palette-background-level1)","--Table-headerUnderlineThickness":"1px","--TableRow-hoverBackground":"var(--joy-palette-background-level1)","--TableCell-paddingY":"4px","--TableCell-paddingX":"8px",...O?{...q,"& tr > *:last-child":{position:"sticky",right:0,bgcolor:"var(--TableCell-headBackground)"}}:{}},children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[!!B&&(0,k.jsx)("th",{style:{paddingTop:"4px",width:"40px"},onClick:e=>e.stopPropagation(),children:(0,k.jsx)(C,{checked:U,onChange:e=>(e=>{if(e){const e=K.map((e=>e._id));null===L||void 0===L||L(e)}else null===L||void 0===L||L([])})(e.target.checked)})}),!!_&&(0,k.jsx)("th",{style:{padding:"8px",width:40},children:(0,k.jsx)(d.Ay,{level:"sm"===f?"body-xs":"title-sm"})}),a.filter((e=>!e.hide)).map(((e,l)=>(0,k.jsx)("th",{style:{padding:"8px",width:e.width},children:null!==c&&void 0!==c&&c.includes(e.key)?(0,k.jsx)(d.Ay,{component:"a",style:{cursor:"pointer"},onClick:()=>{W({key:e.key,order:"asc"===V.order?"desc":"asc"})},endDecorator:V.key===e.key?(0,k.jsx)(h.A,{}):null,sx:{"& svg":{transition:"0.2s",transform:V.key===e.key&&"desc"===V.order?"rotate(0deg)":"rotate(180deg)"}},level:"sm"===f?"body-xs":"title-sm",children:e.label}):(0,k.jsx)(d.Ay,{level:"sm"===f?"body-xs":"title-sm",children:e.label})},e.key||l)))]})}),(0,k.jsx)("tbody",{children:I?Y:null!==K&&void 0!==K&&K.length?null===K||void 0===K?void 0:K.map(((e,l)=>{const n=null===T||void 0===T?void 0:T(e);return(0,k.jsxs)(y.Fragment,{children:[(0,k.jsxs)("tr",{onClick:()=>null===p||void 0===p?void 0:p(e),style:{cursor:p?"pointer":"default"},children:[!!B&&!!F&&(0,k.jsx)("td",{onClick:e=>e.stopPropagation(),children:(0,k.jsx)(C,{sx:{marginTop:"4px"},checked:F.includes(e._id),onChange:l=>((e,l)=>{if(!F)return;let n=[];n=e?[...F,l._id]:F.filter((e=>e!==l._id)),null===L||void 0===L||L(n)})(l.target.checked,e)})},"select_item"),!!_&&(0,k.jsx)("td",{children:(R-1)*x+l+1},"idx"),a.filter((e=>!e.hide)).map(((l,n)=>{var r,t;return(0,k.jsx)("td",{onClick:e=>{l.stopPropagation&&e.stopPropagation()},children:null!==(r=null===(t=l.render)||void 0===t?void 0:t.call(l,e))&&void 0!==r?r:e[l.key]},l.key+n)}))]},e._id),n&&(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{}),(0,k.jsx)("td",{colSpan:a.length-1,children:n})]})]},e.id||e._id||l)})):G})]})}),(0,k.jsxs)(g.A,{spacing:1,sx:{display:{xs:"initial",sm:"none"}},children:[!!A&&(0,k.jsx)(m.A,{children:A}),I?Y:null!==K&&void 0!==K&&K.length?null===K||void 0===K?void 0:K.map(((e,l)=>(0,k.jsx)(r.A,{onClick:()=>null===p||void 0===p?void 0:p(e),style:{cursor:p?"pointer":"default"},sx:{borderRadius:"sm",border:"1px solid",borderColor:"neutral.200",p:2,"&:hover":{borderColor:"primary.main"}},children:(0,k.jsx)(j.A,{container:!0,spacing:1,children:a.filter((e=>!e.hide)).map(((l,n)=>{var t,i;return(0,k.jsx)(j.A,{xs:12,children:(0,k.jsxs)(r.A,{children:[(0,k.jsx)(d.Ay,{color:"neutral",level:"body-sm",children:l.label}),(0,k.jsx)(r.A,{children:null!==(t=null===(i=l.render)||void 0===i?void 0:i.call(l,e))&&void 0!==t?t:(0,k.jsx)(d.Ay,{children:e[l.key]})})]})},l.key||n)}))},e._id)},e._id||e.id||l))):G]}),(0,k.jsx)(S,{currentPage:R,pageSize:x,total:null!==(n=null===X||void 0===X?void 0:X.length)&&void 0!==n?n:0,onChange:e=>N(e)})]})}},3565:(e,l,n)=>{n.d(l,{A:()=>H});var r=n(3900),t=n(9326),i=n(3874),a=n(2144),s=n(5048),o=n(7010),d=n(4160),c=n(8372),u=n(2409),h=n(28),x=n(2435),p=n(8862),v=n(6117),g=n(4512),j=n(8376),m=n(7454),y=n(5668),f=n(5508),b=n(1428),A=n(6069),k=n(9153),C=n(4159),w=n.n(C),S=n(1397),z=n.n(S),T=n(9950),M=n(5828),_=n(1027),B=n(4414);function F(e){return(0,B.jsx)(M.l,{...e,value:e.value?w()(e.value):null,onChange:l=>{var n;const r=w()(l).valueOf();null===(n=e.onChange)||void 0===n||n.call(e,r)},slotProps:{textField:{size:"small"}},format:_.DX.DATE_ONLY,dayOfWeekFormatter:(e,l)=>w()(l).subtract(1,"day").format("ddd")})}var L=n(1365);const O=e=>{let{label:l,inputLabel:n,value:r,onChange:t,onKeyUp:i,placeholder:a,lg:s}=e;return(0,B.jsxs)(o.A,{xs:12,lg:s,children:[!!l&&(0,B.jsx)(k.Ay,{level:"title-md",mb:1,children:l}),(0,B.jsx)(y.A,{children:(0,B.jsx)(L.A,{label:n,value:r||"",onChange:e=>t(e.target.value),placeholder:a,onKeyUp:i})})]})},D=e=>{let{label:l,options:n,value:i,onChange:a,lg:s}=e;const u=i.length===n.length;return(0,B.jsxs)(o.A,{xs:12,lg:s,children:[(0,B.jsx)(k.Ay,{level:"title-md",mb:1,endDecorator:(0,B.jsx)(d.A,{checked:u,onChange:()=>{a(u?[]:n.map((e=>e.value)))},label:"Ch\u1ecdn t\u1ea5t c\u1ea3",size:"sm"}),children:l}),(0,B.jsx)(c.A,{sx:{margin:-.5},children:(0,B.jsx)(o.A,{container:!0,spacing:1,children:n.map((e=>(0,B.jsx)(o.A,{xs:12,md:6,children:(0,B.jsx)(p.A,{sx:{boxShadow:"none","&:hover":{bgcolor:"background.level1"},p:1,cursor:"pointer",borderColor:i.includes(e.value)?"var(--joy-palette-primary-solidActiveBg)":"neutral.outlinedHoverBorder",borderWidth:i.includes(e.value)?"2px":"1px"},onClick:()=>{i.includes(e.value)?a(i.filter((l=>l!==e.value))):a([...i,e.value])},children:(0,B.jsx)(k.Ay,{level:"body-sm",color:"neutral",startDecorator:i.includes(e.value)?(0,B.jsx)(r.A,{fontSize:"small",color:"success"}):(0,B.jsx)(t.A,{fontSize:"small"}),children:e.label})},e.value)},e.value)))})})]})},E=e=>{let{label:l,options:n,value:r,onChange:t,lg:s}=e;return(0,B.jsxs)(o.A,{xs:12,lg:s,children:[(0,B.jsx)(k.Ay,{level:"title-md",mb:1,children:l}),(0,B.jsx)(c.A,{sx:{margin:-.5},children:(0,B.jsx)(o.A,{container:!0,spacing:1,children:n.map((e=>(0,B.jsx)(o.A,{xs:12,md:6,children:(0,B.jsx)(p.A,{sx:{boxShadow:"none","&:hover":{bgcolor:"background.level1"},p:1,cursor:"pointer",borderColor:r===e.value?"var(--joy-palette-primary-solidActiveBg)":"neutral.outlinedHoverBorder",borderWidth:r===e.value?"2px":"1px"},onClick:()=>{t(e.value)},children:(0,B.jsx)(k.Ay,{level:"body-sm",color:"neutral",startDecorator:r===e.value?(0,B.jsx)(i.A,{fontSize:"small",color:"success"}):(0,B.jsx)(a.A,{fontSize:"small"}),children:e.label})},e.value)},e.value)))})})]})},P=e=>{let{label:l,value:n,onChange:r,lg:t}=e;return(0,B.jsxs)(o.A,{xs:12,lg:t,children:[(0,B.jsx)(k.Ay,{level:"title-md",mb:1,children:l}),(0,B.jsx)(c.A,{sx:{margin:-.5},children:(0,B.jsxs)(o.A,{container:!0,spacing:1,children:[(0,B.jsx)(o.A,{xs:12,sm:6,children:(0,B.jsx)(y.A,{children:(0,B.jsx)(F,{label:"T\u1eeb ng\xe0y",value:n.from,onChange:e=>{r({...n,from:w()(e).startOf("day").valueOf()})}})})}),(0,B.jsx)(o.A,{xs:12,sm:6,children:(0,B.jsx)(y.A,{children:(0,B.jsx)(F,{label:"\u0110\u1ebfn ng\xe0y",value:n.to,onChange:e=>{r({...n,to:w()(e).endOf("day").valueOf()})}})})})]})})]})};function H(e){let{title:l,filters:n,value:r,onChange:t,defaultValue:i}=e;const[a,d]=T.useState(!1),[p,y]=T.useState({...r});T.useEffect((()=>{y({...r})}),[r,a]);const k=e=>{console.log("Apply filter",e),t(e),d(!1)},C=T.useCallback(z().debounce((e=>k(e)),500),[]),w=Object.values(p).filter((e=>!z().isEmpty(e))).length,S=(e,l)=>{if(!e)return null;const n=l?void 0:e.label;return"text"===e.type||"texts"===e.type?(0,B.jsx)(O,{label:n,inputLabel:l?e.placeholder:"",value:p[e.key],placeholder:e.placeholder,onChange:n=>{const r={...p,[e.key]:n};y(r),l&&C(r)},lg:e.lg},e.key):"multiple-select"===e.type?(0,B.jsx)(D,{label:n,options:e.options,value:p[e.key]||[],onChange:l=>{y({...p,[e.key]:l})},lg:e.lg},e.key):"date"===e.type?(0,B.jsx)(P,{label:n,value:p[e.key]||{from:null,to:null},onChange:l=>{y({...p,[e.key]:l})},lg:e.lg},e.key):"select"===e.type?(0,B.jsx)(E,{label:n,options:e.options,value:p[e.key],onChange:l=>{y({...p,[e.key]:l})},lg:e.lg},e.key):null},M=S(n.find((e=>e.quickSearch)),!0);return(0,B.jsxs)(T.Fragment,{children:[(0,B.jsxs)(c.A,{sx:{display:"flex",gap:1,alignItems:"center"},children:[M?(0,B.jsx)(c.A,{sx:{width:"400px",display:{sm:"none",md:"block"}},children:M}):null,(!M||M&&n.length>1)&&(0,B.jsx)(u.A,{badgeContent:w,size:"sm",children:(0,B.jsx)(h.Ay,{variant:"outlined",color:"neutral",size:"sm",onClick:()=>d(!0),children:(0,B.jsx)(s.A,{})})})]}),(0,B.jsx)(m.A,{size:"lg",variant:"plain",anchor:"right",open:a,onClose:()=>d(!1),children:(0,B.jsxs)(b.A,{sx:{borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,height:"100%",overflow:"auto"},children:[(0,B.jsx)(g.A,{children:l||"Filters"}),(0,B.jsx)(f.A,{}),(0,B.jsx)(j.A,{sx:{mt:"auto"}}),(0,B.jsx)(v.A,{sx:{gap:2,p:.5,overflowX:"hidden",overflowY:"auto"},children:(0,B.jsx)(o.A,{container:!0,spacing:2,children:n.map((e=>S(e,!1)))})}),(0,B.jsx)(j.A,{sx:{mt:"auto"}}),(0,B.jsxs)(A.A,{direction:"row",justifyContent:"flex-end",useFlexGap:!0,spacing:1,children:[(0,B.jsx)(x.A,{variant:"outlined",color:"neutral",onClick:()=>{if(i)return void y(z().cloneDeep(i));const e=Object.fromEntries(Object.keys(p).map((e=>[e,""])));y(e)},children:"Reset"}),(0,B.jsx)(x.A,{onClick:()=>k(p),children:"Apply"})]})]})})]})}},9906:(e,l,n)=>{n.d(l,{A:()=>v});var r=n(8372),t=n(9153),i=n(8862),a=n(8376),s=n(5833),o=n(8170),d=n(1350),c=n(7750),u=n(9950),h=n(3170),x=n(3239),p=n(4414);function v(e){let{pageName:l,pageLeftAction:n,children:s,pageAction:o,breadcrumb:d,skeletonLoading:c,tabs:v,tab:j,onChangeTab:m}=e;const y=(0,h.jL)();return(0,u.useEffect)((()=>{y((0,x.Wd)(d||null))}),[d]),(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(i.A,{sx:{background:"var(--joy-palette-primary)",maxHeight:d?"calc(100vh - 100px)":"calc(100vh - 180px)"},children:[(0,p.jsxs)(r.A,{sx:{display:"flex",gap:1,alignItems:"center",flexWrap:"wrap",justifyContent:"space-between"},children:[n||(0,p.jsx)(t.Ay,{level:"body-md",children:(0,p.jsx)("b",{children:l})}),o]}),(0,p.jsx)(a.A,{}),null!==v&&void 0!==v&&v.length?v?c||(0,p.jsx)(g,{tabs:v,onChangeTab:m,tab:j}):null:(0,p.jsx)(r.A,{sx:{minHeight:0,overflow:"hidden auto",flexGrow:1,display:"flex",flexDirection:"column",pb:1,"&::-webkit-scrollbar":{display:"none"},"-ms-overflow-style":"none","scrollbar-width":"none"},children:c||s})]},"wrapper")})}function g(e){let{tabs:l,onChangeTab:n,tab:r}=e;const[t,i]=(0,u.useState)(l[0]);return(0,u.useEffect)((()=>{if(r){const e=l.find((e=>e.label===r))||l[0];i(e),null===n||void 0===n||n(e.label)}}),[r]),(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(s.A,{sx:{marginX:-2,marginTop:"-0.74rem",overflow:"hidden auto",background:"var(--joy-palette-primary)"},value:t.label,onChange:(e,r)=>{const t=l.find((e=>e.label===r))||l[0];i(t),null===n||void 0===n||n(t.label)},children:[(0,p.jsx)(o.A,{variant:"soft",children:l.map((e=>(0,p.jsx)(d.A,{value:e.label,children:e.label},e.label)))}),l.map((e=>(0,p.jsx)(c.A,{value:e.label,sx:{overflow:"hidden auto"},children:e.renderContent?e.renderContent():e.content},e.label)))]})})}}}]);